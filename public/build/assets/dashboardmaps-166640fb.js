const n=window.burl;var e=L.map("dashboardmap",{minZoom:2,attributionControl:!1}).setView([.33995192349439596,120.3733680354565],5),d=new L.FeatureGroup,c=L.tileLayer(window.mapLayer,{attribution:""});c.addTo(e);function m(a,i=null,r=null,o=null){var t;if(i?t=L.marker(a,i):t=L.marker(a),o){var l=L.popup().setContent(o);t.bindPopup(l,{className:"custom-popup"}).openPopup()}if(r){var s=L.tooltip().setContent(r);t.bindTooltip(s).openTooltip()}return t.addTo(e),t}var p=function(a){return`<h3 class="h6 d-block text-uppercase font-weight-bold">${a.ftdevice_name}</h3><span class="bottom-line d-block mx-auto mt-3 mb-4"></span><div class="row my-2 mx-auto"><div class="col text-right border-right border-dark">Last Update</div><div class="col-7 pl-4">${window.dtHumanParse(a.created_at)}</div></div><div class="row my-2 mx-auto"><div class="col-5 text-right border-right border-dark">Vehicle ID</div><div class="col-7 pl-4">${a.ftasset_id}</div></div><div class="row my-2 mx-auto"><div class="col-5 text-right border-right border-dark">Vehicle Name</div><div class="col-7 pl-4">${a.ftasset_name}</div></div><div class="row my-2 mx-auto"><div class="col-5 text-right border-right border-dark"></div>`};$.get(n+"/dashboard/js",function(a){$.each(a.data.data,function(i,r){var o=m({lat:r.fflat,lng:r.fflon},{icon:L.icon({iconUrl:`${n}/assets/images/leaflet/red-car-front.png`,iconSize:window.c_marker_front_cfg[0],iconAnchor:window.c_marker_front_cfg[1],popupAnchor:window.c_marker_front_cfg[2]})},r.ftasset_id,p(r));d.addLayer(o),d.addTo(e)}),a.data.data.length!=0&&e.fitBounds(d.getBounds())});
