(function(e){typeof define=="function"&&define.amd?define(e):e()})(function(){L.ShapeMarker=L.CircleMarker.extend({options:{fill:!0,shape:"triangle",radius:10,rotation:0},setRadius:function(e){return this.options.radius=e,this.redraw()},getRadius:function(){return this.options.radius},setRotation:function(e){return this.options.rotation=e,this.redraw()},getRotation:function(){return this.options.rotation},_updatePath:function(){this._renderer._updateShape(this)},toGeoJSON:function(){return L.GeoJSON.getFeature(this,{type:"Point",coordinates:L.GeoJSON.latLngToCoords(this.getLatLng())})}}),L.shapeMarker=function(i,t){return new L.ShapeMarker(i,t)},L.SVG.include({_updateShape:function(i){var t=i._point,a=i.options.radius,s=i.options.shape,p=i.options.rotation;if(i._path.setAttribute("transform",`rotate(${p},${t.x},${t.y})`),s==="diamond"){var r="M"+(t.x-Math.sqrt(2)*a)+" "+t.y+" L "+t.x+" "+(t.y-Math.sqrt(2)*a)+" L"+(t.x+Math.sqrt(2)*a)+" "+t.y+" L"+t.x+" "+(t.y+Math.sqrt(2)*a)+" L"+(t.x-Math.sqrt(2)*a)+" "+t.y;this._setPath(i,r)}if(s==="square"){var r="M"+(t.x-a)+" "+(t.y-a)+" L "+(t.x+a)+" "+(t.y-a)+" L"+(t.x+a)+" "+(t.y+a)+" L"+(t.x-a)+" "+(t.y+a)+" L"+(t.x-a)+" "+(t.y-a);this._setPath(i,r)}if(s==="triangle"||s==="triangle-up"){var r="M"+(t.x-1.3*a)+" "+(t.y+.75*a)+" L"+t.x+" "+(t.y-1.5*a)+" L"+(t.x+1.3*a)+" "+(t.y+.75*a)+" Z";this._setPath(i,r)}if(s==="triangle-down"){var r="M"+(t.x-1.3*a)+" "+(t.y-.75*a)+" L"+t.x+" "+(t.y+1.5*a)+" L"+(t.x+1.3*a)+" "+(t.y-.75*a)+" Z";this._setPath(i,r)}if(s==="arrowhead"||s==="arrowhead-up"){var r="M "+(t.x+1.3*a)+" "+(t.y+1.3*a)+" L "+t.x+" "+(t.y-1.3*a)+" L "+(t.x-1.3*a)+" "+(t.y+1.3*a)+" L "+t.x+" "+(t.y+.5*a)+" L "+(t.x+1.3*a)+" "+(t.y+1.3*a)+" Z";this._setPath(i,r)}if(s==="arrowhead-down"){var r="M "+(t.x-1.3*a)+" "+(t.y-1.3*a)+" L "+t.x+" "+(t.y+1.3*a)+" L "+(t.x+1.3*a)+" "+(t.y-1.3*a)+" L "+t.x+" "+(t.y-.5*a)+" L "+(t.x-1.3*a)+" "+(t.y-1.3*a)+" Z";this._setPath(i,r)}if(s==="circle"&&this._updateCircle(i),s.startsWith("star")){var d=s.split(/[^0-9a-z]/gi,2),h=parseInt(d[1]);if(d[0]==="star"&&!isNaN(h)&&h>2)var n=h;else var n=5;for(var x=.5*(1+Math.sqrt(5))+1,u=[],o=0;o<n;o++)u.push(t.x+a/x*Math.sin(2*Math.PI/n*o)+","+(t.y+a/x*Math.cos(2*Math.PI/n*o))),u.push(t.x+a*Math.sin(1/n*Math.PI+2*Math.PI/n*o)+","+(t.y+a*Math.cos(1/n*Math.PI+2*Math.PI/n*o)));var r="M"+u.join("L")+"Z";this._setPath(i,r)}if(s==="x"){a=a/2;var r="M"+(t.x+a)+","+(t.y+a)+"L"+(t.x-a)+","+(t.y-a)+"M"+(t.x-a)+","+(t.y+a)+"L"+(t.x+a)+","+(t.y-a);this._setPath(i,r)}}})});
