import"./leaflet-svg-shape-markers-8f7f1e58.js";var a=L.map("sectionmap",{minZoom:5,attributionControl:!1,fullscreenControl:!0}).setView([.33995192349439596,120.3733680354565],5);new L.FeatureGroup;var r=[],p,u=L.tileLayer(window.mapLayerOpenStreet,{attribution:""});u.addTo(a);function d(e){var t={type:"FeatureCollection",name:"section",features:r};function n(){return{pane:"pane_Section",shape:"circle",radius:4,opacity:1,color:"#000000",dashArray:"",lineCap:"butt",lineJoin:"miter",weight:1,fill:!1,fillOpacity:1,fillColor:"#000000",interactive:!1}}e.createPane("pane_Section"),e.getPane("pane_Section").style.zIndex=402,e.getPane("pane_Section").style["mix-blend-mode"]="normal",p=new L.geoJson(t,{attribution:"",interactive:!0,dataVar:"jSection",layerName:"lSection",pane:"pane_Section",pointToLayer:function(o,i){return L.shapeMarker(i,n())}}),e.addLayer(p)}var l=0;$("input[name='ckScanPoints']").change(function(){l=0});$("input[name='ckAddPoints']").change(function(){l=1});function f(e){var t=new FormData;t.append("_token",$("input[name=_token]").val()),t.append("latlng",e),$.ajax({type:"POST",url:`${window.burl}/tollroute/js/add`,data:t,dataType:"json",contentType:!1,cache:!1,processData:!1,beforeSend:function(){$("#formSection").css("opacity",".5")},success:function(n){$("#formSection").css("opacity","");var o=n.msg;o.code===200?toastr.success("Saved.","Error"):(console.log(n),toastr.error(n.msg.obj,"Error"))}})}L.DomUtil.addClass(a._container,"crosshair-cursor-enabled");a.on("click",function(e){var t=e.latlng.lat,n=e.latlng.lng,o={lat:e.latlng.lat,lng:e.latlng.lng};switch(l){case 0:r=[],$.get(`${window.burl}/devtools/js/tollsectionpoint?latlng=${t},${n}`,function(c){$.each(c.data,function(g,s){r.push({type:"Feature",properties:{},geometry:{type:"Point",coordinates:[parseFloat(s.fflon),parseFloat(s.fflat)]}})}),c.data.length!=0&&d(a)});break;case 1:var i=window._newMarker(o,{icon:L.icon({iconUrl:"/assets/images/leaflet/marker-reddot.png",iconSize:[8,16],iconAnchor:[5,14]}),interactive:!1});i.addTo(a),f(JSON.stringify(i._latlng));break;default:console.log("No Action")}});
